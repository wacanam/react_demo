(this.webpackJsonpreact_demo=this.webpackJsonpreact_demo||[]).push([[0],{211:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(16),c=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(90),a(91);var o=a(2),s=a(19),i=a(7),m=Object(n.createContext)();function u(){return Object(n.useContext)(m)}var d=a(47),p=a.n(d),E=a(80),b=a(81),h=a.n(b),f={baseURL:"https://online-election.herokuapp.com//api/v1/",timeout:5e3,maxAge:9e5,limit:!1,exclude:{paths:[],query:!0,filter:null},invalidate:function(){var e=Object(E.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("get"===a.method.toLowerCase()){e.next=4;break}return e.next=4,t.store.removeItem(t.uuid);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,ignoreCache:!1,debug:!1},g=h.a.create(f);g.interceptors.response.use((function(e){return new Promise((function(t,a){return t(e)}))}),(function(e){return e.response?401!==e.response.status?Promise((function(t,a){a(e)})):(localStorage.removeItem("authData"),void(window.location="/login")):new Promise((function(t,a){a(e)}))}));var v=g,N=function(e){e?g.defaults.headers.common.Authorization=e.token_type+" "+e.token:delete g.defaults.headers.common.Authorization};var w=l.a.memo((function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(o.a)(c,2),m=s[0],d=s[1],p=Object(n.useState)(),E=Object(o.a)(p,2),b=E[0],h=E[1],f=u(),g=f.authToken,N=f.setAuthToken;return null!==g&&g.expires_in<Date.now()?l.a.createElement(i.a,{exact:!0,to:"/admin"}):l.a.createElement("div",null,l.a.createElement("div",{className:"container jumbotron col-6"},l.a.createElement("div",{className:""},l.a.createElement("h2",{className:"text-center"},"Admin Login"),l.a.createElement("p",null)),b&&l.a.createElement("div",{className:""},l.a.createElement("h6",{className:"text-center ".concat(b.success?"text-success":"text-danger")},b.message),l.a.createElement("p",null)),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&m&&v.post("admin/login",{username:a,password:m}).then((function(e){console.log(e),h(e.data),200===e.status&&N(e.data)})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username"},"Username:"),l.a.createElement("input",{type:"username",className:"form-control",id:"username",placeholder:"Enter username",name:"username",value:a,onChange:function(e){return r(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"pwd"},"Password:"),l.a.createElement("input",{type:"password",className:"form-control",id:"pwd",placeholder:"Enter password",name:"pswd",value:m,onChange:function(e){return d(e.target.value)}})),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Login")))))}));var y=l.a.memo((function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(o.a)(c,2),m=s[0],d=s[1],p=Object(n.useState)(),E=Object(o.a)(p,2),b=E[0],h=E[1],f=u(),g=f.authToken,N=f.setAuthToken;return null!==g&&g.expires_in<Date.now()?l.a.createElement(i.a,{exact:!0,to:"/"}):l.a.createElement("div",null,l.a.createElement("div",{className:"container jumbotron col-6"},l.a.createElement("div",{className:""},l.a.createElement("h2",{className:"text-center"},"Voter's Login"),l.a.createElement("p",null)),b&&l.a.createElement("div",{className:""},l.a.createElement("h6",{className:"text-center ".concat(b.success?"text-success":"text-danger")},b.message),l.a.createElement("p",null)),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&m&&v.post("user/login",{username:a,password:m}).then((function(e){console.log(e),h(e.data),200===e.status&&N(e.data)})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"voters_id"},"Voter's ID:"),l.a.createElement("input",{type:"text",className:"form-control",id:"voters_id",placeholder:"Enter voter's ID",name:"voters_id",value:a,onChange:function(e){return r(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"voters_key"},"Voter's Key:"),l.a.createElement("input",{type:"password",className:"form-control",id:"voters_key",placeholder:"Enter voter's key",name:"voters_key",value:m,onChange:function(e){return d(e.target.value)}})),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Login")))))}));var x=l.a.memo((function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(),s=Object(o.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)(),d=Object(o.a)(u,2),p=d[0],E=d[1],b=Object(n.useState)(),h=Object(o.a)(b,2),f=h[0],g=h[1],N=Object(n.useState)(),w=Object(o.a)(N,2),y=w[0],x=w[1],S=Object(n.useState)(),O=Object(o.a)(S,2),j=O[0],k=O[1];return l.a.createElement("div",null,l.a.createElement("div",{className:"container jumbotron col-6"},l.a.createElement("div",{className:""},l.a.createElement("h2",{className:"text-center"},"Register Voter"),l.a.createElement("p",null)),j&&l.a.createElement("div",{className:""},l.a.createElement("h6",{className:"text-center ".concat(j.success?"text-success":"text-danger")},j.message),l.a.createElement("p",null)),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&i&&v.post("user/register",{username:a,password:i,first_name:p,last_name:f,email:y}).then((function(e){console.log(e),k(e.data)})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"voters_id"},"Voter's ID:"),l.a.createElement("input",{type:"text",className:"form-control",id:"voters_id",placeholder:"Enter voters_id",value:a,onChange:function(e){return r(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email:"),l.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter email",value:y,onChange:function(e){return x(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"voters_key"},"Voter's Key:"),l.a.createElement("input",{type:"password",className:"form-control",id:"voters_key",placeholder:"Enter Voter's Key",value:i,onChange:function(e){return m(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"first_name"},"First name:"),l.a.createElement("input",{type:"text",className:"form-control",id:"first_name",placeholder:"Enter First name",value:p,onChange:function(e){return E(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"last_name"},"Last name:"),l.a.createElement("input",{type:"text",className:"form-control",id:"last_name",placeholder:"Enter Last name",value:f,onChange:function(e){return g(e.target.value)}})),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Regiter")))))})),S=a(214),O=a(29),j=a(10);var k=l.a.memo((function(e){var t=e.show,a=e.id,r=Object(n.useState)(),c=Object(o.a)(r,2),s=c[0],i=c[1],m=Object(n.useState)(0),u=Object(o.a)(m,2),d=u[0],p=(u[1],Object(n.useState)({})),E=Object(o.a)(p,2),b=E[0],h=E[1];Object(n.useEffect)((function(){v.get("user/election/".concat(a)).then((function(e){console.log(e),200===e.status&&i(e.data.data)})).catch((function(e){console.error(e)}))}),[a,d]);var f={textAlign:"center",display:"block",fontSize:"1.5em",marginBlockStart:"0.83em",marginBlockEnd:"0.83em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"};return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showVoteElectionModal,size:"xl",onHide:function(){return t.setShowVoteElectionModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Election Ballot | ",s&&s.description,l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},s&&l.a.createElement("div",{className:"text-center"},l.a.createElement("div",{className:"text-left m-3"},l.a.createElement("h5",null,"Title: ",s.title),l.a.createElement("p",null,"Description: ",s.description)),l.a.createElement(O.Test,{onOptionSelect:function(e){return h(e)}},s.positions.map((function(e,t){return l.a.createElement(O.QuestionGroup,{questionNumber:e.id,key:e.id},l.a.createElement(O.Question,{style:f},t+1,". ",e.name),e.candidates.map((function(e){return l.a.createElement(O.Option,{value:e.users[0].id,key:e.id},e.users[0].first_name+" "+e.users[0].last_name)})))}))),l.a.createElement("hr",null),l.a.createElement("div",{className:"text-center float-right"},l.a.createElement("button",{className:"btn btn-primary m-2",onClick:function(){console.log(b)}},"Submit"),l.a.createElement("button",{className:"btn btn-dark m-2"},"Cancel")))),l.a.createElement(j.a,null)))})),C=l.a.memo((function(){var e=u(),t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],c=(a[1],Object(n.useState)(0)),s=Object(o.a)(c,2),m=s[0],d=s[1],p=Object(n.useState)(0),E=Object(o.a)(p,2),b=E[0],h=E[1],f=Object(n.useState)(!1),g=Object(o.a)(f,2),w=g[0],y=g[1];return Object(n.useEffect)((function(){v.get("user/".concat(e.authToken.user.id)).then((function(e){console.log(e),200===e.status&&d(e.data.data.elections)})).catch((function(e){console.error(e)}))}),[r]),e&&"voter"!==e.authToken.user.role?l.a.createElement(i.a,{exact:!0,to:"/admin"}):l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow"},l.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},"CRUD Election System"),l.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},l.a.createElement("a",{className:"p-2 text-dark",href:"#"},"Elections")),l.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){v.get("user/logout").then((function(t){console.log(t.data),200===t.status&&(e.setAuthToken(null),N(!1))})).catch((function(e){return console.error(e)}))}},"Logout")),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-striped table-sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Election Name"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Date Created"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,m&&m.length?m.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.title),l.a.createElement("td",null,e.description),l.a.createElement("td",null,e.created_at),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-sm btn-info mx-1",onClick:function(){return t=e.id,h(t),void y(!0);var t}},"Vote")))})):l.a.createElement("td",{colSpan:"5",className:"text-center"},"No Election found!"))))),w&&l.a.createElement(k,{show:{showVoteElectionModal:w,setShowVoteElectionModal:y},id:b}))}));var _=l.a.memo((function(e){var t=e.show,a=e.callBack,r=Object(n.useState)(),c=Object(o.a)(r,2),s=c[0],i=c[1],m=Object(n.useState)(),u=Object(o.a)(m,2),d=u[0],p=u[1],E=Object(n.useState)(),b=Object(o.a)(E,2),h=b[0],f=b[1],g=Object(n.useState)(),N=Object(o.a)(g,2),w=N[0],y=N[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showAddElectionModal,size:"md",onHide:function(){return t.setShowAddElectionModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"New Election Form |"," ",l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s&&v.post("admin/election/store",{title:s,description:d,start_date:h,end_date:w}).then((function(e){console.log(e),200===e.status&&(console.log("Saved"),t.setShowAddElectionModal(!1),a.setNeedUpdate(a.needUpdate+1))})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",null,l.a.createElement("p",{className:"card-description"},"Input basic election parameters"),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-title"},l.a.createElement("i",{className:"mdi mdi-pound text-white"}))),l.a.createElement("input",{type:"text",required:!0,className:"form-control",placeholder:"Title","aria-label":"title","data-tip":"This will serve as title",value:s,onChange:function(e){return i(e.target.value)}}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-type-selector"},l.a.createElement("i",{className:"mdi mdi-view-list text-white"}))),l.a.createElement("input",{placeholder:"Description (optional)",className:"form-control","aria-label":"description","aria-describedby":"description",value:d,onChange:function(e){return p(e.target.value)}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"colored-addon3"},l.a.createElement("i",{className:"mdi mdi-play text-white"}))),l.a.createElement("input",{type:"datetime-local",className:"form-control","aria-describedby":"colored-addon3","data-tip":"Specify the Date and time for the announcement will start",value:h,onChange:function(e){return f(e.target.value)}}))),l.a.createElement("div",{className:"col-6 form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"colored-addon3"},l.a.createElement("i",{className:"mdi mdi-stop text-white"}))),l.a.createElement("input",{type:"datetime-local",className:"form-control","aria-describedby":"colored-addon3","data-tip":"Specify the Date and time for the announcement will end",value:w,onChange:function(e){return y(e.target.value)}}))))),l.a.createElement("div",{className:"float-right"},l.a.createElement("button",{type:"submit",className:"btn btn-success mx-1"},"Create"),l.a.createElement("button",{className:"btn btn-warning mx-1",onClick:function(){return t.setShowAddElectionModal(!1)}},"Close")))),l.a.createElement(j.a,null)))}));var A=l.a.memo((function(e){var t=e.show,a=e.election,r=e.callBack,c=Object(n.useState)(),s=Object(o.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)(),d=Object(o.a)(u,2),p=d[0],E=d[1],b=Object(n.useState)(),h=Object(o.a)(b,2),f=h[0],g=h[1],N=Object(n.useState)(),w=Object(o.a)(N,2),y=w[0],x=w[1];return Object(n.useEffect)((function(){m(a&&a.title),E(a&&a.description),g(a&&a.start_date),x(a&&a.end_date)}),[a&&a.id]),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showEditElectionModal,size:"md",onHide:function(){return t.setShowEditElectionModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Edit Election ",a&&a.id," Form |"," ",l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&v.put("admin/election/update/".concat(a.id),{title:i,description:p,start_date:f,end_date:y}).then((function(e){console.log(e),200===e.status&&(console.log("Updated"),t.setShowEditElectionModal(!1),r.setNeedUpdate(r.needUpdate+1))})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",null,l.a.createElement("p",{className:"card-description"},"Input basic election parameters"),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-title"},l.a.createElement("i",{className:"mdi mdi-pound text-white"}))),l.a.createElement("input",{type:"text",required:!0,className:"form-control",placeholder:"Title","aria-label":"title","data-tip":"This will serve as title",defaultValue:i,onChange:function(e){return m(e.target.value)}}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-type-selector"},l.a.createElement("i",{className:"mdi mdi-view-list text-white"}))),l.a.createElement("input",{placeholder:"Description (optional)",className:"form-control","aria-label":"description","aria-describedby":"description",defaultValue:p,onChange:function(e){return E(e.target.value)}}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"colored-addon3"},l.a.createElement("i",{className:"mdi mdi-play text-white"}))),l.a.createElement("input",{type:"datetime-local",className:"form-control","aria-describedby":"colored-addon3","data-tip":"Specify the Date and time for the announcement will start",defaultValue:f,onChange:function(e){return g(e.target.value)}}))),l.a.createElement("div",{className:"col-6 form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"colored-addon3"},l.a.createElement("i",{className:"mdi mdi-stop text-white"}))),l.a.createElement("input",{type:"datetime-local",className:"form-control","aria-describedby":"colored-addon3","data-tip":"Specify the Date and time for the announcement will end",defaultValue:y,onChange:function(e){return x(e.target.value)}}))))),l.a.createElement("div",{className:"float-right"},l.a.createElement("button",{type:"submit",className:"btn btn-success mx-1"},"Create"),l.a.createElement("button",{className:"btn btn-warning mx-1",onClick:function(){return t.setShowEditElectionModal(!1)}},"Close")))),l.a.createElement(j.a,null)))}));var D=l.a.memo((function(e){var t=e.show,a=e.callBack,r=e.election,c=Object(n.useState)(),s=Object(o.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)(),d=Object(o.a)(u,2),p=d[0],E=d[1],b=Object(n.useState)(),h=Object(o.a)(b,2),f=(h[0],h[1],Object(n.useState)([])),g=Object(o.a)(f,2);return g[0],g[1],l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showAddPositionModal,size:"lg",onHide:function(){return t.setShowAddPositionModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Add Position Form |"," ",l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&v.post("admin/position/store",{name:i,description:p,election_id:r}).then((function(e){console.log(e),200===e.status&&(console.log("Saved"),t.setShowAddPositionModal(!1),a.setNeedUpdate(a.needUpdate+1))})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",null,l.a.createElement("p",{className:"card-description"},"Input basic election parameters"),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-name"},l.a.createElement("i",{className:"mdi mdi-pound text-white"}))),l.a.createElement("input",{type:"text",required:!0,className:"form-control",placeholder:"Position","aria-label":"position","data-tip":"This will serve as position",value:i,onChange:function(e){return m(e.target.value)}}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-description"},l.a.createElement("i",{className:"mdi mdi-pound text-white"}))),l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Description (optional)","aria-label":"description","data-tip":"This will serve as description",value:p,onChange:function(e){return E(e.target.value)}})))),l.a.createElement("div",{className:"float-right"},l.a.createElement("button",{type:"submit",className:"btn btn-success mx-1"},"Create"),l.a.createElement("button",{className:"btn btn-warning mx-1",onClick:function(){return t.setShowAddPositionModal(!1)}},"Close")))),l.a.createElement(j.a,null)))}));var M=l.a.memo((function(e){var t=e.show,a=e.callBack,r=e.position,c=Object(n.useState)(),s=Object(o.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),p=d[0],E=d[1];return Object(n.useEffect)((function(){v.get("admin/user").then((function(e){console.log(e),200===e.status&&E(e.data.data)})).catch((function(e){console.error(e)}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showAddCandidateModal,size:"lg",onHide:function(){return t.setShowAddCandidateModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Add Candidate Form |"," ",l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&v.post("admin/candidate/store",{voter_id:i,position_id:r}).then((function(e){console.log(e),200===e.status&&(console.log("Saved"),t.setShowAddCandidateModal(!1),a.setNeedUpdate(a.needUpdate+1))})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",null,l.a.createElement("p",{className:"card-description"},"Input basic candidate parameters"),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-type-selector"},l.a.createElement("i",{className:"mdi mdi-view-list text-white"}))),l.a.createElement("select",{required:!0,className:"form-control","aria-label":"voter_id","aria-describedby":"voter_id",value:i,onChange:function(e){return m(e.target.value)}},l.a.createElement("option",{value:""},"Select Voter"),p&&p.map((function(e){return l.a.createElement("option",{value:e.id},e.last_name+", "+e.first_name)})))))),l.a.createElement("div",{className:"float-right"},l.a.createElement("button",{type:"submit",className:"btn btn-success mx-1"},"Create"),l.a.createElement("button",{className:"btn btn-warning mx-1",onClick:function(){return t.setShowAddCandidateModal(!1)}},"Close")))),l.a.createElement(j.a,null)))}));var V=l.a.memo((function(e){var t=e.show,a=e.callBack,r=e.election,c=Object(n.useState)(),s=Object(o.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)(),d=Object(o.a)(u,2),p=d[0],E=d[1];return Object(n.useEffect)((function(){v.get("admin/user").then((function(e){console.log(e),200===e.status&&E(e.data.data)})).catch((function(e){console.error(e)}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showAddVoterModal,size:"lg",onHide:function(){return t.setShowAddVoterModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Add Voter Form |"," ",l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&v.post("admin/election-voter/store",{user_id:i,election_id:r}).then((function(e){console.log(e),200===e.status&&(console.log("Saved"),t.setShowAddVoterModal(!1),a.setNeedUpdate(a.needUpdate+1))})).catch((function(e){console.error(e)}))}.bind(this)},l.a.createElement("div",null,l.a.createElement("p",{className:"card-description"},"Input basic candidate parameters"),l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text bg-primary border-primary",id:"input-type-selector"},l.a.createElement("i",{className:"mdi mdi-view-list text-white"}))),l.a.createElement("select",{required:!0,className:"form-control","aria-label":"user_id","aria-describedby":"user_id",value:i,onChange:function(e){return m(e.target.value)}},l.a.createElement("option",{value:""},"Select Voter"),p&&p.map((function(e){return l.a.createElement("option",{value:e.id},e.last_name+", "+e.first_name)})))))),l.a.createElement("div",{className:"float-right"},l.a.createElement("button",{type:"submit",className:"btn btn-success mx-1"},"Create"),l.a.createElement("button",{className:"btn btn-warning mx-1",onClick:function(){return t.setShowAddVoterModal(!1)}},"Close")))),l.a.createElement(j.a,null)))}));var B=l.a.memo((function(e){var t=e.show,a=e.id,r=Object(n.useState)(),c=Object(o.a)(r,2),s=c[0],i=c[1],m=Object(n.useState)(0),u=Object(o.a)(m,2),d=u[0],p=u[1],E=Object(n.useState)(!1),b=Object(o.a)(E,2),h=b[0],f=b[1],g=Object(n.useState)(!1),N=Object(o.a)(g,2),w=N[0],y=N[1],x=Object(n.useState)(!1),O=Object(o.a)(x,2),k=O[0],C=O[1],_=Object(n.useState)(),A=Object(o.a)(_,2),B=A[0],T=A[1],F=Object(n.useState)(),U=Object(o.a)(F,2),P=U[0],H=U[1];return Object(n.useEffect)((function(){v.get("admin/election/".concat(a)).then((function(e){console.log(e),200===e.status&&i(e.data.data)})).catch((function(e){console.error(e)}))}),[a,d]),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{show:t.showElectionModal,size:"xl",onHide:function(){return t.setShowElectionModal(!1)},backdrop:"static",keyboard:!0,animation:!1},l.a.createElement(S.a.Header,{closeButton:!0},l.a.createElement(S.a.Title,null,"Election Report |"," ",l.a.createElement("small",null,"Press ",l.a.createElement("code",null,"ESC")," to exit."))),l.a.createElement(S.a.Body,{className:"pt-0"},s&&l.a.createElement("div",{className:"m-2"},l.a.createElement("button",{className:"btn btn-sm btn-info float-right",onClick:function(){return function(e){v.delete("admin/election/update/".concat(e)).then((function(e){console.log(e),200===e.status&&(console.log(e.data.message),p(d+1))})).catch((function(e){console.error(e)}))}(s.id)}},"Update"),l.a.createElement("h6",null,"Name : ",l.a.createElement("code",null,s.title)),l.a.createElement("h6",null,"Description : ",l.a.createElement("code",null,s.description)),l.a.createElement("h6",null,"Date created : ",l.a.createElement("code",null,s.created_at)),l.a.createElement("h6",null,"Status : ",l.a.createElement("code",null)),l.a.createElement("h6",null,"Start Date : ",l.a.createElement("code",null,s.start_date)),l.a.createElement("h6",null,"End Date : ",l.a.createElement("code",null,s.end_date)),l.a.createElement("hr",null),l.a.createElement("div",{className:"text-center"},l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm m-2",onClick:function(){return function(e){T(e),y(!0)}(s.id)}},"Add Position"),l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm m-2",onClick:function(){return function(e){T(e),C(!0)}(s.id)}},"Add Voters")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"accordion col-6",id:"election_result"},l.a.createElement("div",{className:"card"},s.positions.length?s.positions.map((function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"card-header",id:"result",key:t},l.a.createElement("h5",{className:"mb-0"},l.a.createElement("button",{className:"btn btn-link text-decoration-none",type:"button","data-toggle":"collapse","data-target":"#".concat(e.name.replace(/[^A-Z0-9]/gi,"")),"aria-expanded":"true","aria-controls":e.name.replace(/[^A-Z0-9]/gi,"")},l.a.createElement("i",{className:"fa fa-arrow-down"}),e.name+" | "+e.description),l.a.createElement("button",{className:"btn btn-sm btn-warning float-right",onClick:function(){return function(e){v.delete("admin/position/delete/".concat(e)).then((function(e){console.log(e),200===e.status&&(console.log(e.data.message),p(d+1))})).catch((function(e){console.error(e)}))}(e.id)}},"Delete"))),l.a.createElement("div",{id:"".concat(e.name.replace(/[^A-Z0-9]/gi,"")),className:"collapse","aria-labelledby":"result","data-parent":"#election_result"},l.a.createElement("div",{className:"card-body pt-0"},l.a.createElement("div",{className:""},l.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm m-2",onClick:function(){return function(e){H(e),f(!0)}(e.id)}},"Add Candidate")),l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-striped table-sm table-bordered text-center"},l.a.createElement("thead",{className:"text-center"},l.a.createElement("tr",null,l.a.createElement("th",null,"Candidate"),l.a.createElement("th",null,"Votes"),l.a.createElement("th",null,"Remarks"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",{className:"text-center"},e.candidates.length?e.candidates.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.users[0].last_name+", "+e.users[0].first_name),l.a.createElement("td",null,e.votes),l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-sm btn-warning mx-1",onClick:function(){return function(e){v.delete("admin/candidate/delete/".concat(e)).then((function(e){console.log(e),200===e.status&&(console.log(e.data.message),p(d+1))})).catch((function(e){console.error(e)}))}(e.id)}},"Delete")))})):l.a.createElement("td",{colspan:"4"},"No Candidates")))))))})):l.a.createElement("h4",{className:"text-center"},"No Position Added"))),l.a.createElement("div",{className:"col-6"},l.a.createElement("h4",{className:"my-2"},"Voters List"),l.a.createElement("table",{className:"table table-striped table-sm table-bordered text-center"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"#"),l.a.createElement("th",{scope:"col"},"First"),l.a.createElement("th",{scope:"col"},"Last"),l.a.createElement("th",{scope:"col"},"Voted"),l.a.createElement("th",{scope:"col"},"Action"))),l.a.createElement("tbody",null,s.users?s.users.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("th",{scope:"row"},e.id),l.a.createElement("td",null,e.first_name),l.a.createElement("td",null,e.last_name),l.a.createElement("td",null,e.pivot.voted?"Yes":"No"),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-sm btn-warning",onClick:function(){return function(e){v.delete("admin/election-voter/delete/".concat(e)).then((function(e){console.log(e),200===e.status&&(console.log(e.data.message),p(d+1))})).catch((function(e){console.error(e)}))}(e.pivot.id)}},"Delete")))})):l.a.createElement("td",null,"No Voters"))))))),l.a.createElement(j.a,null)),w&&l.a.createElement(D,{show:{showAddPositionModal:w,setShowAddPositionModal:y},callBack:{needUpdate:d,setNeedUpdate:p},election:B}),h&&l.a.createElement(M,{show:{showAddCandidateModal:h,setShowAddCandidateModal:f},callBack:{needUpdate:d,setNeedUpdate:p},position:P}),k&&l.a.createElement(V,{show:{showAddVoterModal:k,setShowAddVoterModal:C},callBack:{needUpdate:d,setNeedUpdate:p},election:B}))})),T=l.a.memo((function(){var e=u(),t=Object(n.useState)(0),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),m=Object(o.a)(s,2),d=m[0],p=m[1],E=Object(n.useState)(!1),b=Object(o.a)(E,2),h=b[0],f=b[1],g=Object(n.useState)(!1),w=Object(o.a)(g,2),y=w[0],x=w[1],S=Object(n.useState)([]),O=Object(o.a)(S,2),j=O[0],k=O[1],C=Object(n.useState)(),D=Object(o.a)(C,2),M=D[0],V=D[1];return Object(n.useEffect)((function(){v.get("admin/election/get/".concat(e.authToken.user.id)).then((function(e){console.log(e),200===e.status&&k(e.data.data)})).catch((function(e){console.error(e)}))}),[r]),e&&"admin"!==e.authToken.user.role?l.a.createElement(i.a,{exact:!0,to:"/"}):l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom box-shadow"},l.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},"CRUD Election System"),l.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},l.a.createElement("a",{className:"p-2 text-dark",href:"#"},"Elections"),l.a.createElement("button",{className:"btn btn-outline-success",onClick:function(){return p(!0)}},"Create Election")),l.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(){v.get("admin/logout").then((function(t){console.log(t.data),200===t.status&&(e.setAuthToken(null),N(!1))})).catch((function(e){return console.error(e)}))}},"Logout")),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-striped table-sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Election Name"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"Date Created"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,j&&j.length?j.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.title),l.a.createElement("td",null,e.description),l.a.createElement("td",null,e.created_at),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-sm btn-warning mx-1",onClick:function(){return t=e.id,void v.delete("admin/election/delete/".concat(t)).then((function(e){console.log(e),200===e.status&&c(r+1)}));var t}},"Delete"),l.a.createElement("button",{className:"btn btn-sm btn-info mx-1",onClick:function(){return function(e){V(e),f(!0)}(e)}},"Edit"),l.a.createElement("button",{className:"btn btn-sm btn-success mx-1",onClick:function(){return t=e.id,V(t),void x(!0);var t}},"Show")))})):l.a.createElement("td",{colSpan:"5",className:"text-center"},"No Election found!"))))),y&&l.a.createElement(B,{show:{showElectionModal:y,setShowElectionModal:x},id:M}),d&&l.a.createElement(_,{show:{showAddElectionModal:d,setShowAddElectionModal:p},callBack:{needUpdate:r,setNeedUpdate:c}}),h&&l.a.createElement(A,{show:{showEditElectionModal:h,setShowEditElectionModal:f},election:M,callBack:{needUpdate:r,setNeedUpdate:c}}))})),F=a(84),U=function(e){var t=e.component,a=Object(F.a)(e,["component"]),n=u();return l.a.createElement(i.b,Object.assign({},a,{render:function(e){return function(e){return null!==e.authToken&&e.authToken.expires_in<Date.now()}(n)?l.a.createElement(t,e):l.a.createElement(i.a,{exact:!0,to:"/login"})}}))};function P(){document.title="Election";var e=Object(n.useState)(JSON.parse(localStorage.getItem("authData"))),t=Object(o.a)(e,2),a=t[0],r=t[1];return N(a),l.a.createElement(m.Provider,{value:{authToken:a,setAuthToken:function(e){null===e?localStorage.clear():localStorage.setItem("authData",JSON.stringify(e)),r(e)}}},l.a.createElement(s.a,null,l.a.createElement(i.d,null,l.a.createElement(i.b,{exact:!0,path:"/admin/login",component:w}),l.a.createElement(i.b,{exact:!0,path:"/login",component:y}),l.a.createElement(i.b,{exact:!0,path:"/register",component:x}),l.a.createElement(U,{exact:!0,path:"/",component:C}),l.a.createElement(U,{exact:!0,path:"/admin",component:T}),l.a.createElement(i.b,{render:function(){return l.a.createElement("h1",{className:"jumbotron text-center"},"404 | Not Found")}}))))}c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){e.exports=a(211)}},[[85,1,2]]]);
//# sourceMappingURL=main.5d9b0d1e.chunk.js.map